# Dise√±o de Bajo Nivel ‚Äì Backend para RandomCameraReviews

## üîç Definiciones y Acr√≥nimos

- **API**: Interfaz de Programaci√≥n de Aplicaciones.
- **TDD**: Desarrollo Guiado por Pruebas (*Test Driven Development*).
- **HTTP**: Protocolo de Transferencia de Hipertexto.
- **CRUD**: Crear, Leer, Actualizar, Eliminar.
- **POST**: M√©todo HTTP para enviar datos al servidor.
- **GET**: M√©todo HTTP para obtener datos del servidor.
- **Editor (Ed)**: Usuario autorizado que redacta y sube rese√±as.
- **Usuario (Lector)**: Visitante que accede a las rese√±as, sin autenticaci√≥n.
- **Review (Rese√±a)**: Contenido editorial escrito por fot√≥grafos sobre c√°maras espec√≠ficas.

---

## Problema a Resolver

La meta es construir y desarrollar la arquitectura de un sistema backend desde cero hasta la implementaci√≥n (deploy) del mismo, deber√° realizarse tomando en cuenta la planificaci√≥n de la arquitectura que se detalle en alto nivel. Para ello, los requerimientos que nos ha dado un cliente ficticio son los siguientes:
- La empresa ‚ÄúRandomCameraReviews‚Äù necesita un sistema que permita que fot√≥grafos profesionales suban ‚Äúreviews‚Äù de c√°maras fotogr√°ficas, para que cualquier persona en todo el mundo pueda buscar los reviews y compararlas a trav√©s de su portal. La empresa cuenta con un equipo de developers especializado en frontend que realizar√° una interfaz de usuario para que los editores suban sus ‚Äúreviews‚Äù y los usuarios puedan verlas, y han solicitado que creemos un sistema backend, incluyendo su API, que permita realizar lo siguiente:
    - Subir reviews de c√°maras fotogr√°ficas.
    - Obtener el contenido de los reviews para mostrarlo en vistas del portal en sus versiones web y mobile.
    - Manejo de usuarios para editores (no incluye visitantes que leen los reviews).

Tambi√©n se menciona que la empresa ‚ÄúRandomCameraReviews‚Äù planea distribuir mayormente en America del Sur, donde est√° su mercado m√°s grande, pero tambi√©n tienen ventas en Norte Am√©rica, Europa y muy pocas en Asia. De igual forma, los editores se encuentran mayormente en Am√©rica del Sur.

---

## üéØ Objetivos

- Permitir a los editores subir rese√±as a trav√©s de una API autenticada.
- Proporcionar una API p√∫blica para que los usuarios puedan consultar rese√±as.
- Construir el sistema backend con enfoque TDD para garantizar confiabilidad.
- Facilitar el despliegue y escalabilidad geogr√°fica para operaciones de lectura.

### Stakeholders (Interesados)

- Equipo de Producto (define requerimientos del negocio).
- Equipo de Ingenier√≠a Backend (desarrolla y mantiene la API).
- Desarrolladores Frontend (consumen la API).
- Editores (suben contenido al sistema).
- Usuarios Finales / Lectores (consumen contenido).

---

## üí≠ Suposiciones

- Solo los editores requieren autenticaci√≥n y acceso de escritura.
- Los usuarios no necesitan registrarse para consultar las rese√±as.
- Los editores est√°n ubicados principalmente en Sudam√©rica.
- La mayor√≠a de los usuarios est√°n en Sudam√©rica, Norteam√©rica y Europa, con menor presencia en Asia.

---

## üöß Limitaciones y Desconocimientos

En esta secci√≥n se describe un listado de limitaciones conocidas, ya sea de recursos o conocimientos, y se deben presentar de forma cuantificable.
- Las estimaciones de tr√°fico se basan en los mercados conocidos actualmente; un crecimiento r√°pido puede requerir un balanceo de carga.
- No se contempla la subida de archivos multimedia por el momento.
- No se incluye soporte multilenguaje.
- Las llamadas de la API que permite subir reviews (POST), no excede los l√≠mites de latencia de 500ms.
- Las llamadas a la API que permitan leer reviews (GET), deben de tener una latencia menor a 100ms.

---

## Alcance del Proyecto

### ‚úÖ Alcance Incluido (Scope)

- API REST con endpoints para la creaci√≥n de rese√±as (`POST /reviews`) y lectura de contenido (`GET /content`).
- Autenticaci√≥n y control de acceso para editores.
- Almacenamiento y recuperaci√≥n de datos de rese√±as.
- Preparaci√≥n para distribuci√≥n geogr√°fica en operaciones de lectura.
- Backend listo para desplegar.

### ‚ùå Fuera de Alcance (Out of Scope)

- Autenticaci√≥n para los lectores.
- Implementaci√≥n del frontend.
- Subida de im√°genes o contenido multimedia.
- Sistema de puntuaci√≥n o comentarios en las rese√±as.

### ‚úÖ Casos de Uso

Esto se realiza a trav√©s de iteraciones con el cliente, donde se describe ejemplos de uso de la aplicaci√≥n para que haya claridad entre ambas partes. 
1. Como editor, me gustar√≠a poder subir una review de una c√°mara o una review de un lente para c√°mara, para ello:
2. **Ed sube una rese√±a**: El editor autenticado utiliza el endpoint `/reviews` para enviar una rese√±a.
3. **Usuario consulta una rese√±a**: El visitante accede al endpoint `/content` para visualizar rese√±as publicadas.
4. **Editor actualiza una rese√±a**: (Posible funci√≥n futura, no implementada en esta versi√≥n).
5. **Escalabilidad para lecturas globales**: El sistema se adapta a alta demanda de lectura en distintas regiones.

---

### ‚ùå Casos de Uso No Soportados

Esto se realiza a trav√©s de iteraciones con el cliente, donde se describe ejemplos de uso de la aplicaci√≥n para que haya claridad entre ambas partes. 
1. Como usuario me gustar√≠a poder subir una review de c√°mara.

---

## üß† Propuesta

### üèóÔ∏è Arquitectura de Bajo Nivel

- **Frontend**: Desarrollado por otro equipo, consumir√° nuestra API REST.
- **Backend**: API REST desarrollada con Python (FastAPI o Flask).
- **Base de Datos**: PostgreSQL para almacenamiento estructurado.
- **Autenticaci√≥n**: Tokens JWT para validar editores.
- **Despliegue**: Aplicaci√≥n dockerizada, compatible con cualquier proveedor cloud.
- **Distribuci√≥n Global**: Uso de CDN o r√©plicas de solo lectura para escalar el endpoint `/content`.

#### Diagramas
En esta secci√≥n se incluyen:
- Diagramas de secuencia: Representan el flujo de mensajes entre componentes del sistema a lo largo del tiempo, mostrando c√≥mo interact√∫an para cumplir una funci√≥n espec√≠fica.
- Diagramas UML (Unified Modeling Language): Son representaciones gr√°ficas que se utilizan para visualizar, especificar, construir y documentar los elementos de un sistema de software.

##### Endpoints de la API

| M√©todo | Endpoint     | Descripci√≥n                                 | Requiere Autenticaci√≥n |
|--------|--------------|---------------------------------------------|-------------------------|
| POST   | /reviews     | Subir una nueva rese√±a                      | ‚úÖ S√≠                   |
| GET    | /content     | Obtener todas las rese√±as disponibles       | ‚ùå No                   |

---


#### üìä Modelos de Datos (SQL)

En esta secci√≥n se describen entidades, relaciones, JSONs, tablas, diagramas de entidad-relaci√≥n, etc. pertenecientes a la base de datos del sistema.
```sql
-- Tabla de Editores
CREATE TABLE editors (
  id SERIAL PRIMARY KEY,
  name TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  password_hash TEXT NOT NULL
);

-- Tabla de Rese√±as
CREATE TABLE reviews (
  id SERIAL PRIMARY KEY,
  title TEXT NOT NULL,
  content TEXT NOT NULL,
  camera_model TEXT NOT NULL,
  editor_id INTEGER REFERENCES editors(id),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### Plan de Pruebas (TDD)

Adem√°s de los diagramas de arquitectura y los modelos de datos, vale la pena pensar de igual forma en un plan de pruebas y que valide ciertos casos de uso, simulando as√≠ un uso normal de la aplicaci√≥n y previniendo los casos donde el sistema se pueda romper, comprobando as√≠ que todo funciona bien, antes de siquiera hacer un deploy en la nube.

### ‚úÖ Casos de Uso

Esto se realiza a trav√©s de iteraciones con el cliente, donde se describe ejemplos de uso de la aplicaci√≥n para que haya claridad entre ambas partes. 
1. Como editor, me gustar√≠a poder subir una review de una c√°mara o una review de un lente para c√°mara, para ello:
2. **Ed sube una rese√±a**: El editor autenticado utiliza el endpoint `/reviews` para enviar una rese√±a.
3. **Usuario consulta una rese√±a**: El visitante accede al endpoint `/content` para visualizar rese√±as publicadas.
4. **Editor actualiza una rese√±a**: (Posible funci√≥n futura, no implementada en esta versi√≥n).
5. **Escalabilidad para lecturas globales**: El sistema se adapta a alta demanda de lectura en distintas regiones.

- **Primer caso implement test TDD:** Registrar usuario, crear review y simular que visitante puede leer el review escrito.
---

### ‚ùå Casos de Uso No Soportados

Esto se realiza a trav√©s de iteraciones con el cliente, donde se describe ejemplos de uso de la aplicaci√≥n para que haya claridad entre ambas partes. 
1. Como usuario me gustar√≠a poder subir una review de c√°mara.

---

### Integraci√≥n Continua (CI/CD)

Esta secci√≥n contiene diagramas de pipelines, describiendo as√≠ el proceso de implementaci√≥n de features y arreglo de bugs cuando estos se implementen al sistema, realiz√°ndoles pruebas cuando se quiera subir dichos cambios a GitHub, indicando hasta el flujo de integraci√≥n (merge) de ramas y asignando cada una al proceso de desarrollo:
Dev branch -> Testing branch -> Main branch (Producci√≥n).
En conclusi√≥n, CI/CD es b√°sicamente un flujo escrito o diagramado de c√≥mo queremos que nuestras features o funcionalidades espec√≠ficas ser√°n aprobadas y subidas al repositorio de nuestro proyecto en GitHub.
---


### Componentes del Sistema

- **Servicio de Rese√±as**: Maneja la creaci√≥n y validaci√≥n de rese√±as.
- **Servicio de Contenido**: Optimizado para lectura r√°pida de rese√±as.
- **Servicio de Autenticaci√≥n**: Emite y valida tokens JWT.
- **Capa de Base de Datos**: Almacena rese√±as y credenciales de editores.

---

### üí∏ Consideraciones de Costo
Contemplando 100,000 usuarios diarios, que visiten recurrentemente cada hora el sitio, se tienen los siguientes costos:
- **Hosting del Backend:** ~$30‚Äì50 USD/mes (ej. AWS EC2, DigitalOcean).
- **Base de Datos Administrada:** ~$15‚Äì25 USD/mes (ej. AWS RDS, Supabase).
- **CDN o Cach√© (para /content):** ~$10‚Äì20 USD/mes.
- **Monitoreo y Logs (opcional):** ~$10‚Äì15 USD/mes adicionales.